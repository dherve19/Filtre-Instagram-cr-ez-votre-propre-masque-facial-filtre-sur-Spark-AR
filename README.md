# Filtre Instagram : Apprenez les bases de Spark AR en créant votre propre filtre AR (FanMask)
> Tadammm ! L’heure est venue d’apprendre à créer facilement votre premier filtre de réalité augmentée et à le partager sur Instagram avec Spark AR le meilleur logiciel qui permet aux débutants de créer des filtres impressionnants.

![alt text](images/1.jpg)

En Instagrammant, il y a de fortes chances que vous soyez entré en contact avec un filtre AR d'une manière ou d'une autre et que vous ayez probablement eu l'envie de créer votre propre filtre Instagram. Nous avons donc réalisé ce tutoriel pour vous apprendre à faire des filtres Instagram. Sachez qu'il est très **facile** de créer des filtres simples, de les rendre accessibles à tout le monde sur Instagram et **N’importe qui peut le faire** grâce au logiciel **Spark AR Studio**, qui ne fonctionne que sur ordinateur.

À travers ce tutoriel, Nous allons vous montrer comment créer facilement votre premier filtre de réalité augmentée Spark AR et le partager sur la famille d'applications Facebook comme Instagram. En utilisant :
- Spark AR Studio 
- Un smartphone
## But du guide
Le but de ce guide est de fournir un aperçu général de Spark AR Studio, de créer un filtre AR de masque facial pour fan de sport, de le tester et de l'exporter vers Instagram.
## Prérequis
- Avoir accès à une machine connectée à internet
- Avoir accès à une smartphone connectée à internet
- Avoir téléchargé et installé **Spark AR studio** sur votre machine (Si vous ne l'avez pas encore fait ou ne savez pas comment le faire, ce n'est pas grave car nous vous expliquerons comment le faire dans ce tutoriel).
- Avoir installé l’application pour iOS et Android **Spark AR Player** sur votre smartphone.
- Avoir un compte Instagram et/ou Facebook en règle.
## Sommaire
- Introduction et Prise en main de Spark AR Studio
- Création d’un filtre pour fan de sport (FanMask)
- Publier votre filtre fanMask sur Instagram

## Introduction et Prise en main de Spark AR Studio
La **réalité augmentée (RA)** est une technologie qui permet la superposition des éléments virtuels (sons, images 2D, 3D, vidéos, etc.) au sein d’un environnement en temps réel. Le principe est de combiner le virtuel et le réel et donner l’illusion d’une intégration parfaite à l’utilisateur.

**Les filtres de réalité augmentée (RA)** sont des effets générés par ordinateur conçus pour être superposés à des images réelles. Les filtres AR fonctionnent avec votre appareil photo, ajoutant un calque ou des images au premier plan ou à l'arrière-plan de votre image. Alors que les filtres AR Instagram ont été introduits en 2017, il n'était pas possible pour quiconque de créer ses propres filtres AR jusqu'à récemment ou Facebook a publié son application de création filtre AR appelée Spark AR Studio.

**Spark AR Studio** est un logiciel gratuit développer par Facebook afin d’aide tout personne à avoir une expérience en réalité augmentée par la réalisation gratuite des filtres AR pour **Instagram** et **Facebook**. Le AR signifie réalité augmentée (Augmented Reality en anglais). Le site de téléchargement et le logiciel (disponible pour Windows et Mac) sont en anglais pour le moment, mais pas d’inquiétude, nous sommes là pour vous aider. Afin de tester vos filtres AR, nous vous recommandons de télécharger également ** Spark AR Player **.

**Spark AR Player** est une application pour iOS et Android, qui vous permet de voir à quoi ressembleront en direct vos filtres AR sur un smartphone avant de le publier publiquement sur **Instagram** ou **Facebook**. 

#### Créer votre tout premier filtre AR Instagram signifiera apprendre de nouvelles idées et de nouvelles terminologies, Voici pour vous un guide étape par étape pour la prise et les terminologies utilisées sur Spark AR Studio afin que vous puissiez commencer à créer votre propre filtre.

1. **Télécharger le logiciel Spark AR Studio** en allant sur le site officiel à l’adresse suivante : https://sparkar.facebook.com/ar-studio/download/. Cliquez sur « **download** » (télécharger en français) en haut et à droite de la page qui s’affichera à votre écran

![](images/2.PNG), 

Ensuite cliquez à nouveau sur le bouton rouge « **download** » à gauche de votre écran. 

![](images/3.PNG)

> Vous pouvez aussi aller sur google, recherchez Spark AR studio et choisir le premier résultat pour accéder au site de téléchargement.

2. **Installer Spark AR Player** qui est disponible sur le Play Store de Google pour les appareils Android et sur l'App Store d'Apple pour les iPhones. Vous trouverez également cette application au milieu de la page https://sparkar.facebook.com/ar-studio/download/. Depuis votre smartphone, vous devrez cliquer sur l’un des deux boutons de téléchargement (un pour iOS et un autre pour Android) situé sous « **Get the Spark AR Player** », car depuis votre ordinateur, il ne se passera rien.

![](images/33.PNG)

3. **Installer le logiciel Spark AR.** Si vous ne savez pas comment faire, suivez ces instructions, c'est un jeu d’enfant (nous utilisons la version 99 du 10/20/2020 pour Windows dans ce tutoriel). 

- Double cliquez sur l’icône du fichier téléchargé. Sur l'interface qui vous est présentée, cliquez sur le bouton « **Run** » 

![alt](images/4.PNG)

- Cliquez ensuite sur le bouton « **Next »

![alt text](images/5.PNG)

- Acceptez les termes du contrat de licence et cliquez sur « **Next »

![alt text](images/6.PNG)

- Dans la nouvelle fenêtre, Cliquez à nouveau sur « **Next »

![alt text](images/7.PNG)

- Choisissez le disque local sur lequel vous souhaitez installer Spark AR, nous vous conseillons de laisser les valeurs par défaut et de cliquer simplement sur « **Next »

![alt text](images/8.PNG)

- Une fois arrivé sur l’avant dernière page, il ne vous reste plus qu’à cliquer sur « **Install** » 

![alt text](images/9.PNG)

Enfin cliquez sur « **finish** » pour terminer l'installation.

![alt text](images/10.PNG)

> Vérifions maintenant que l'installation s'est bien déroulée en lançant l'application.  
4. **Lancer le logiciel Spark AR Studio.** Rendez-vous sur la page d'accueil de votre PC Windows. Taper (**Spark AR**) dans la barre de recherche située en bas, à gauche de votre écran et près du carré blanc composé de quatre autres carrés blancs représentant le menu de votre ordinateur. Vous verrez apparaître l'icône Spark AR, Cliquez dessus et Attendez quelques secondes pour que l’application soit lancée. Après vous être connecté avec soit votre compte Facebook ou Instagram, une fenêtre tout du moins similaire s’ouvrira, cliquez sur « Maybe Later » (des nouvelles fonctionnalités sont ajoutées au logiciel toutes les deux semaines, vous pourriez avoir quelques choses légèrement différentes si vous utilisez une autre version). Nous vous recommandons plus tard de revenir cliquez sur le bouton « **Start Tour** » qui vous montrera effets déjà réalisés et vous apprendra à les construire.

![alt text](images/11.PNG)

> **Remarque :** Si vous rencontrez malgré tout quelques difficultés sur l’installation ou le lancement de Spark AR, n’hésitez pas à contacter un ami qui s’y connaît un minimum dans les nouvelles technologies, pas besoin de contacter un expert en l’informatique.

### Présentation de l’interface de Spark AR Studio.
L'écran d’accueil de Spark AR vous présente des exemples de projets de base déjà réalisés qui sont aussi des tutoriels. Sur la barre latérale à gauche de votre écran, une section intitulée « Learn » vous redirigera vers des vidéos d’apprentissage. Pour ce tutoriel, Nous prendrons l’option en haut à gauche de l’ecran « Create a Project »   qui nous permet de créer à un nouveau projet  la base, sans utiliser un projet prédéfini. 

![alt text](images/17.PNG)

Cliquez ensuite sur “Blank projet" pour accéder au tableau de bord où nous créons notre filtre de zéro. 

![alt text](images/12.PNG)

Cette nouvelle interface contient plusieurs touches que nous ne pourrons pas tous présenter explicitement ici. Disons de manière générale que cette interface de création de filtre est composée de 5 zones principales à savoir :
- **La zone 1**, située tout à gauche, comporte plusieurs boutons d’actions tels que la caméra (qui vous permettra de choisir des personnages prédéfinis pour avoir un aperçu de votre filtre ou alors activer votre webcam de l’ordinateur pour avoir un aperçu en direct), pause/play, rafraichir, recherche, tester le filtre sur votre smartphone, exporter, la bibliothèque de Spark AR Studio, etc.
- **La zone 2** représente la « **Scene** » qui contient les différents objets qui vous servira pour ajouter des fonctionnalités dans votre filtre, comme pour suivre les mouvements du visage, etc. Par defaut vous retrouverez un « **Device** » (votre smartphone) constitue de votre camera et votre microphone.
- **La zone 3** contient les « **Assets (actifs)** ». Vous y retrouvez tout ce qui est actifs (objet 3D, matérieau, texture etc.).
- **La zone 4** représente votre appareil avec son écran où vous avez un aperçu de ce qui se passesur un modèle de personnage prédéfini, que vous pourrez modifier.
- **La zone 5** située tout à droite, montre les propriétés des objets que vous avez sélectionnés et que vous pourrez ajuster à votre convenance. Lorsque vous cliquez sur un objet, vous avez ces propriétés dans cette zone. 

![alt text](images/13.png)

> La prise en main terminée, nous allons commencer la création d’un filtre très très simple pour fan de sport (FanMask).
## Création d’un filtre pour fan de sport (FanMask)
1. **Créez la fonctionnalité pour traquer le visage « Facetracker ».**  Le « Facetracker » permet de trouver et suivre les mouvements d’un visage, pour le Créer allez dans l'onglet "Scene", faîtes un clic droit sur « **Focal Distance** », mettez votre curseur sur « **Add** » et dans la liste qui  vous sera proposé choisissez « **Face Tracker** », cela devrait créer une nouvelle entrée dans votre scène comme ci-dessous. L’élément « faceTracker » doit être au même niveau que les deux éléments « ambientLight » et « directionalLight ». Si ce n’est pas le cas, vous avez raté quelque chose, repartez de zéro. 

![alt text](images/14.png) 

> vous pouvez accéder à l'icône de la caméra dans la zone 1 pour changer le personnage ou utiliser la caméra de votre ordinateur en cliquant sur le bouton « PC Camera ».

2. **Ajoutez un « Face Mesh »,** destiné à répondre aux expressions du visage et à poser un matérieau. Faites un clic droit sur l’objet « **Face Mesh** », mettez votre curseur sur « **Add** » et cliquez sur élément « **Face Mesh** » dans la liste.

![alt text](images/15.png)

> Dans « Scene », vous avez maintenant un « Face Tracker » qui possède un « Face Mesh ».
3. **Ajoutez un matériau dans les propriétés du « Face Mesh » pour le maillage de face.** Cliquez sur "Face Mesh" afin d'afficher ces propriétés dans la zone 5. Cliquez sur «** +** » à droite de « **Materials** » situé dans la zone 5. 

![alt text](images/16.png)


Votre matériau sera répertorié dans la zone 3 en tant que « **matérial0** » que vous pouvez renommer pour vous aider à rester organisé pendant que vous construisez votre projet. Pour ce tutoriel nous allons renommer notre matériau0 en « **facemap** ». Pour cela, faites un clic droit sur «**matériau0** », Sélectionnez « **Rename** » et renommez le « **matériau0** » en « **facemap** ».

![alt text](images/19.PNG)

Vous obtiendrez ce résultat dans la zone 4

![alt text](images/20.PNG)

4.**Téléchargez votre actif** qui peut être dans le cadre de ce tutoriel le drapeau d'un pays, d'une équipe ou d'un club de football, basket-ball etc. que vous enregistrerez sur votre bureau au nom de "**flag**". Pour ce tutoriel, nous utiliserons une image du drapeau du Cameroun que vous pouvez trouver à l'adresse suivante [Cameroonflag](https://www.google.com/search?q=cameroon+flag&client=opera&hs=4Uu&sxsrf=ALeKk02xAh27xfqPHwocL0DNqDtiTsFQw:1603595077924&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjrp6X4c7sAhUjAGMBHZ6hBwsQ_AUoAXoECBMQAw&biw=1560&bih=790#imgrc=IrRjV-_DofwO3M&imgdii=T0-0EblHzjONKM ) . 

3. **Importez votre actif « flag » à vos assets (actifs).** ** Pour ce faire, cliquez sur le bouton « Add Asset» dans la zone 3, puis cliquez sur « Import From Computer ». Dans la fenêtre qui s'ouvrira, accédez à votre bureau, cliquez sur votre actif image « flag » puis sur "ouvrir". Un moyen simple d'importer votre actif à vos assets consiste à faire glisser et déposer votre actif image « flag » dans les assets (actifs).  

![alt text](images/21.PNG)

Pour éviter de perdre la qualité de votre image, cochez la case « No Compression » dans la zone 5.

![alt text](images/22.PNG)

4. **Ajoutez une texture sur votre matériau « facemap».** faites un clic sur le  matériau « facemap », cliquez sur la propriété « **Texture**» dans la zone 5 et choisissez l'actif « flag » dans la liste proposée. 

![alt text](images/23.PNG)

Ajustez l'opacité (Opacity) et la luminosité (Brightness) à votre guise ou la double face (Double-sided) pour afficher les deux côtés d'une face normale.

![alt text](images/25.PNG)

5.**Modifiez le « Shader Type » de votre materiau en « Face Paint ».** Dans la zone 5, CLIquez le « Shader Type »  et selectionnez « Face Paint » dans la liste proposée. 

![alt text](images/34.PNG)

Vous obtiendrez ce résultat dans la zone 4.

![alt text](images/24.PNG)

> **Remarque:** Généralement lorsqu on utilise un filtre sur les reseau sociaux on a une peau lisse. Pour y arriver, rajoutez un «Face Mesh » selon la méthode vue au point 3. Mettez un materiau à votre nouveau «Face Mesh», Modifiez le «Shader Type» de votre materiau en « Retouching» et enfin lissez la peau visage en ajustant le «Skin Smoothing » jusqu à 100.

6. **Testez votre filtre votre filtre pour voir comment il se manifeste sur d'autres types de visage en temps réel.** Sur votre smartphone, installez l'application Spark AR Player puis connectez votre smartphone à votre ordinateur à l'aide d'un câble USB. Dans le coin inferieur gauche de la zone 1, cliquez sur l’icône smartphone ensuite sur « Send » dans nouvelle fenêtre. Votre filtre se lancera automatiquement sur votre smartphone. D'autre part, si vous avez une webcam, cliquez sur l'icône de la caméra dans la zone 1. Vous verrez un bouton « PC Camera » au-dessus des visages pour interactif en direct sur votre ordinateur, ou Changez  de personnage pour avoir un autre aperçu de votre filtre sur diffèrent type de visage et faites les ajustements supplémentaires que vous souhaitez.

![alt text](images/27.PNG) 

## Publier votre filtre fanMask sur Instagram
7. **Enregistrez votre projet dans un dossier.** Maintenant que vous avez un filtre qui fonctionne, enregistrez le projet dans un dossier local en cliquant sur « File » (à gauche et en haut de votre écran) et en sélectionnant l'option « Save AS ». Une fenêtre s'ouvrira, Choisissez un emplacement de sauvegarde que vous pourrez facilement trouver plus tard et renommez votre projet en **FanMask** avant la sauvergarde. 

![alt text](images/26.PNG)

8. **Télécharger votre filtre sur Sparkhub.** cliquez à nouveau sur « File »  et sélectionnez l'option « Upload and Export ».

![alt text](images/30.PNG)

Une fenêtre s'ouvrira pour indiquer l'espace que votre filtre utilisera sur différents types d'appareils. Si tout est vert et coché, cliquez sur le bouton "Upload".

![alt text](images/28.PNG)

9.**Renseignez les informations demandées** Une fois le téléchargement terminé, Vous serez automatiquement redirigé vers [Spark AR Hub]( https://www.facebook.com/sparkarhub/) pour soumettre votre filtre AR pour approbation. Cette plateforme donne également la possibilité de gérer et de comprendre les performances de vos effets AR sur Facebook et Instagram.
> Assurez-vous que vous êtes connecté au compte Facebook / Instagram où vous voulez publier l'effet.

![alt text](images/31.PNG)

Sur cette page de Spark AR Hub, renseignez les informations demandées : Nom (FanMaskCmr), Plateforme (Instagram), Propriétés (votre nom de compte Instagram), Catégories (Évènements etc.). Dans la section "Icône d'effet", faites glisser et déposer une image que vous souhaitez utiliser pour représenter votre filtre Instagram. Sur la zone « video Demo », vous aurez deux options : " Enregistrer une vidéo" et "Importer un fichier". L’option “ Enregistrer une vidéo" vous donnera un lien que vous pourrez envoyer à vos amis, votre famille ou vos collègues pour qu'ils puissent tester votre filtre Instagram.

![alt text](images/32.PNG)

Prenez une courte (2 minutes maximum) vidéo de votre filtre en action avec Instagram ou avec votre smartphone qui montrera aux gens ce que fait votre filtre sans avoir à le télécharger. Une fois que vous êtes satisfait de la vidéo, importez là au niveau de la zone « video Demo » puis cliquez " Enregistrer “ dans le coin supérieur droit de la page.

10. **Vérifiez les informations et soumettez votre filtre.**  Si vous êtes prêt à publier votre filtre une fois que vous avez tous soumi et  verifie les informations  demandées, cliquez sur le bouton " Envoyer" dans le coin supérieur droit de la page pour soumettre votre filtre à l'examen de Facebook. Le processus peut prendre des jours, et si votre filtre AR répond aux différentes directives, il apparaîtra pour utilisation. 

Si vous souhaiter tester notre filtre cliquez ici [FanMaskCmr](https://www.instagram.com/ar/2818115521758316/?ch=ZmRhZGJlMGYyZWI2NDRlOTc0MzFiZjA2MDkwMWEwMjc%3D) .

![alt text](images/35.jpg)

## Conclusion
Toutes nos félicitations, Vous avez créé votre premier filtre Instagram ! Nous espérons que ce tutoriel vous a donné les bases de la création de filtres de réalité augmentée et de leur publication sur Instagram.
## What’s next?
Si vous souhaitez continuer à travailler sur ce projet, voici quelques idées :
- Ajoutez plus de drapeaux d'autres pays et clubs sportifs dans ce projet ;
- Créer de nouveaux effets en utilisant d'autres fonctionnalités de Spark AR comme la Création d'un effet d'éclat avec des passes de rendu.
## Pour en savoir plus sur Spark AR.
 Voici quelques recommandations pour poursuivre votre apprentissage et de développer vos compétences sur Spark AR :
- https://sparkar.facebook.com/ar-studio/learn/tutorials/
- https://sommersadvisors.com/comment-utiliser-spark-ar-studio-creer-filtres-en-realite-augmentee-instagram-facebook/
- https://www.youtube.com/watch?v=ED9STH52g0I
- https://www.youtube.com/watch?v=pWj_oiFfNZM

## À propos de l’auteur
**Sage Destin:** Salut cher lecteur et lectrice! Je suis étudiant en biochimie à l'Université de Buea, Cameroun, passionné de technologie, débutant dans la création de filtrer Spark AR et le développement front-end.
